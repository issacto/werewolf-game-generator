{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Router from 'next/router';\nimport styles from '../styles/Home.module.css';\nimport { getRoom, putCharacter } from \"../components/functions/fetch\";\nimport { charatersImageMap, charatersColorMap, charatersList } from \"../components/data\";\n\nclass Menu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sizeAvailable: [5, 6, 7, 8, 9, 10],\n      roomId: 1,\n      numberOfPeople: 5,\n      counter: 4,\n      Citizen: 2,\n      Prophet: 1,\n      Wolf: 1,\n      Cupido: 0,\n      Wizard: 0,\n      Hunter: 0,\n      HiddenWolf: 0,\n      Merchant: 0,\n      fetchCharacterNameArray: [],\n      fetchCharacterSizeArray: []\n    };\n  }\n\n  async fetchData() {\n    await getRoom(this.state.numberOfPeople).then(res => {\n      console.log(res.data);\n      this.setState({\n        roomId: res.data\n      });\n      return res.data;\n    }).catch(err => {\n      console.log(\"Error\");\n      console.log(err);\n      return err;\n    });\n  }\n\n  async putData() {\n    for (var character of charatersList) {\n      if (this.state[character] > 0) {\n        //this.state.fetchCharacterNameArray.push(character)\n        //this.state.fetchCharacterSizeArray.push(this.state[character])\n        await putCharacter(this.state.roomId, character, this.state[character]).then(res => {\n          console.log(res.data);\n          return res.data;\n        }).catch(err => {\n          console.log(\"Error\");\n          console.log(err);\n          return err;\n        });\n      }\n    }\n\n    console.log('roomId');\n    console.log(this.state.roomId);\n    /*\n    await putCharacter(this.state.roomId,this.state.fetchCharacterNameArray,this.state.fetchCharacterSizeArray).then(res => { \n      console.log(res.data)\n      this.setState({roomId:res.data});return res.data;}).catch(err => {console.log(\"Error\");console.log(err); return err})\n    */\n  }\n\n  back(x) {\n    console.log(\"hihi\");\n    Router.push('/');\n  }\n\n  async confirm() {\n    console.log(\"numberOfPeople\");\n    console.log(this.state.numberOfPeople);\n    if (this.state.numberOfPeople > this.state.counter) alert(`Cannot choose number of characters less than the required number - ${this.state.numberOfPeople}`);else if (this.state.numberOfPeople < this.state.counter) alert(`Cannot choose number of characters more than the required number -  ${this.state.numberOfPeople}`);else {\n      var x = await this.fetchData();\n      var y = this.putData();\n      console.log(\"x\");\n      console.log(this.state.roomId);\n      Router.push(`/room?id=${this.state.roomId}`); //console.log(x)\n    }\n  }\n\n  update(number) {\n    console.log(number);\n    var stringNumber = parseInt(number);\n    this.setState({\n      numberOfPeople: stringNumber\n    });\n  }\n\n  getCharacterSelected(character) {\n    switch (character) {\n      case \"Citizen\":\n        return this.state.citizenNo;\n\n      case \"Hunter\":\n        return this.state.hunterNo;\n\n      case \"Wizard\":\n        return this.state.wizardNo;\n\n      default:\n        text = \"Looking forward to the Weekend\";\n        break;\n    }\n  }\n\n  changeCounter(isPlus) {\n    if (isPlus) this.setState({\n      counter: this.state.counter + 1\n    });else this.setState({\n      counter: this.state.counter - 1\n    });\n  }\n\n  changeSize(character, changeSize, isPlus) {\n    switch (character) {\n      case \"Citizen\":\n        if (changeSize >= 2) {\n          this.setState({\n            [character]: changeSize\n          });\n          this.changeCounter(isPlus);\n        }\n\n        ;\n        break;\n\n      case \"Prophet\":\n        if (changeSize >= 1) {\n          this.setState({\n            [character]: changeSize\n          });\n          this.changeCounter(isPlus);\n        }\n\n        ;\n        break;\n\n      case \"Wolf\":\n        if (changeSize >= 1) {\n          this.setState({\n            [character]: changeSize\n          });\n          this.changeCounter(isPlus);\n        }\n\n        ;\n        break;\n\n      default:\n        if (changeSize >= 0) {\n          this.setState({\n            [character]: changeSize\n          });\n          this.changeCounter(isPlus);\n        }\n\n        ;\n        break;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"topBar\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          style: {\n            marginRight: \"2vh\"\n          },\n          children: [\"Player count: \", this.state.numberOfPeople, \" \"]\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Classes chosen: \", this.state.counter]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"middleBar\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"middelP\",\n          children: \"Number of Players: \"\n        }), this.state.sizeAvailable.map(n => /*#__PURE__*/_jsx(\"p\", {\n          className: \"middelP\",\n          onClick: () => this.update(n),\n          children: n\n        }))]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"cardBox\",\n        children: charatersList.map(n => /*#__PURE__*/_jsxs(\"div\", {\n          className: \"cardStyle\",\n          children: [charatersImageMap.get(n), /*#__PURE__*/_jsx(\"p\", {\n            className: \"MenuLogoTitle\",\n            style: {\n              color: charatersColorMap.get(n)\n            },\n            children: n\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              marginTop: \"0.1vh\",\n              display: \"flex\",\n              flexDirection: \"row\"\n            },\n            children: [/*#__PURE__*/_jsx(\"button\", {\n              className: styles.addSubtractButton,\n              onClick: () => this.changeSize(n, this.state[n] - 1, false),\n              children: \"-\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              style: {\n                color: \"white\",\n                margin: \"2vh\"\n              },\n              children: [\" \", this.state[n]]\n            }), /*#__PURE__*/_jsx(\"button\", {\n              className: styles.addSubtractButton,\n              onClick: () => this.changeSize(n, this.state[n] + 1, true),\n              children: \"+\"\n            })]\n          })]\n        }))\n      }), /*#__PURE__*/_jsx(\"p\", {\n        children: \"By default, there are 2 Citizens, 1 Prophet, and 1 Wolf\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"button\", {\n          className: styles.naviButton,\n          style: {\n            marginRight: \"1vw\"\n          },\n          onClick: () => this.back(),\n          children: \"back\"\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: styles.naviButton,\n          style: {\n            marginLeft: \"1vw\"\n          },\n          onClick: () => this.confirm(),\n          children: \"confirm\"\n        })]\n      })]\n    });\n  }\n\n}\n\nexport default Menu;","map":null,"metadata":{},"sourceType":"module"}