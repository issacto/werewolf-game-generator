{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Router from 'next/router';\nimport styles from '../../../styles/Home.module.css';\nimport { hasRoom, joinACharacter, getCharacters } from \"../../../components/functions/fetch\";\n\nclass RoomPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      roomId: ''\n    };\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.handleRoomIdChange = this.handleRoomIdChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleNameChange(event) {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  handleRoomIdChange(event) {\n    this.setState({\n      roomId: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    if (this.state.name && this.state.roomId) {\n      event.preventDefault();\n      var isRoomExists = false; //check room exist not\n\n      await hasRoom(this.state.roomId).then(data => {\n        console.log(data.data);\n        isRoomExists = data.data; //room does not exists\n\n        if (!isRoomExists) {\n          alert(\"Room does not exist\");\n          return;\n        }\n\n        ;\n      });\n      console.log(\"isRoomExists\");\n      console.log(isRoomExists);\n\n      if (isRoomExists) {\n        var characterData = await joinACharacter(this.state.roomId, this.state.name); //if room is full\n\n        if (characterData.data == \"full\") {\n          alert(\"Room is full. Characteres are all occupied\");\n        } else if (characterData.data == \"nameOccupied\") {\n          alert(\"Your input name is used. Please choose another name.\");\n        } else {\n          Router.push(`/room/player?id=${this.state.roomId}&name=${this.state.name}&character=${characterData.data}`);\n          alert('A name was submitted: ' + this.state.name + \". The room id is \" + this.state.roomId);\n        }\n      }\n    } else alert(\"Please fill in BOTH your name and room code\");\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"room\",\n      children: /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: this.handleSubmit,\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxs(\"label\", {\n          className: styles.loginLabel,\n          children: [\"Username: \\xA0 \\xA0\", /*#__PURE__*/_jsx(\"input\", {\n            className: styles.inputBox,\n            type: \"text\",\n            value: this.state.name,\n            onChange: this.handleNameChange\n          })]\n        }), /*#__PURE__*/_jsxs(\"label\", {\n          className: styles.loginLabel,\n          children: [\"Room Code: \\xA0\", /*#__PURE__*/_jsx(\"input\", {\n            className: styles.inputBox,\n            type: \"text\",\n            value: this.state.roomId,\n            onChange: this.handleRoomIdChange\n          })]\n        }), /*#__PURE__*/_jsx(\"input\", {\n          className: styles.submitButton,\n          type: \"submit\",\n          value: \"Submit\"\n        })]\n      })\n    });\n  }\n\n}\n\nexport default RoomPage;","map":null,"metadata":{},"sourceType":"module"}